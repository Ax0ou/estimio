<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h2 class="card-title mb-4 text-center">Interagir avec l'IA 🤖</h2>

          <%= form_for [@quote, @ai_message], local: true do |form| %>
            <div data-controller="audio-recorder">
              <div class="mb-3">
                <%= form.label :description, "Description du chantier (audio ou texte)", class: "form-label" %>
                <%= form.text_area :description, class: "form-control", rows: 3, placeholder: "Décrivez votre besoin...", data: { "audio-recorder-target": "textArea" } %>
                <div class="d-flex flex-column flex-sm-row align-items-stretch gap-2 mt-2">
                  <button type="button" data-action="audio-recorder#toggle" data-audio-recorder-target="recordButton" class="btn btn-outline-primary flex-fill d-flex align-items-center justify-content-center" style="min-width: 120px;">
                    <i class="bi bi-mic-fill me-2"></i>
                    <span>Enregistrer audio</span>
                  </button>
                  <span data-audio-recorder-target="status" class="text-danger align-self-center" style="min-height: 1.5em;"></span>
                </div>
                <audio data-audio-recorder-target="preview" controls style="display:none; width:100%; margin-top:10px;"></audio>
              </div>

              <div class="d-flex justify-content-between">
                <%= link_to "← Retour", new_quote_path, class: "btn btn-outline-secondary" %>
                <%= form.submit "Envoyer", class: "btn btn-primary" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
